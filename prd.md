# Product Requirements Document: Integration Hub "bisnesmedia"

| **Версия** | **Статус**     | **Дата**       | **Автор**                  |
|------------|----------------|----------------|----------------------------|
| 1.0        | Утверждено     | September 2025 | Senior Integration Architect |

---

### 1. Введение и Контекст (Background)

Компания "bisnesmedia" управляет сложной системой товародвижения между несколькими складами и юридическими лицами, используя две ключевые учетные системы: **«1С: Управление торговлей 11»** для внутреннего контура (`ООО "Универмаг-01"`) и **«МойСклад»** для внешних закупок (`ООО "Катюша ОТК"`).

Текущий процесс пополнения запасов на основном складе ("Юрловский") осуществляется вручную. Сотрудники вынуждены ежедневно анализировать остатки, проверять наличие товаров на складах-донорах, отслеживать ранее созданные заказы и вручную создавать документы в обеих системах. Этот процесс является трудоемким, медленным и подверженным человеческим ошибкам.

### 2. Проблема (Problem Statement)

Ручное управление запасами приводит к ряду критических бизнес-проблем:
*   **Риск дефицита (Out-of-Stock):** Несвоевременное пополнение запасов на складе "Юрловский" приводит к упущенной выгоде и снижению лояльности клиентов.
*   **Неэффективное использование ресурсов:** Квалифицированные сотрудники тратят значительное время на рутинные операционные задачи вместо решения стратегических.
*   **Ошибки в заказах:** Человеческий фактор приводит к ошибкам, таким как дублирование заказов на уже перемещаемые товары или неверный расчет потребности.
*   **Отсутствие прозрачности:** Нет единого инструмента для отслеживания статуса всех товаров "в пути", что усложняет планирование.

### 3. Цели и Задачи (Goals & Objectives)

Целью данного проекта является создание **автоматизированного интеграционного хаба**, который полностью устранит ручное вмешательство в процесс пополнения запасов.

**Ключевые цели:**
1.  **Повысить операционную эффективность:** Автоматизировать на 100% процесс создания "Заказов на перемещение" в 1С и "Заказов поставщику" в МойСклад.
2.  **Оптимизировать уровень запасов:** Гарантировать поддержание оптимального количества товаров на складе "Юрловский" на основе правил min/max.
3.  **Обеспечить точность данных:** Исключить возможность дублирования заказов на товары, которые уже находятся в процессе перемещения или закупки.
4.  **Создать прозрачную систему:** Предоставить операторам простой инструмент для мониторинга всех автоматизированных операций и ручного управления процессами.

### 4. Пользователи (User Personas)

*   **Имя:** Анна
*   **Роль:** Менеджер по закупкам / Складской менеджер
*   **Задачи:** Обеспечение наличия товаров на складе "Юрловский".
*   **Боли:** "Я трачу по 2-3 часа каждое утро на сверку остатков и создание заказов. Иногда я пропускаю позицию, и мы теряем продажи. А еще я боюсь случайно заказать то, что уже едет к нам."

### 5. Пользовательские Истории (User Stories)

**Epic 1: Автоматизация Внутренних Перемещений (1С)**
*   **Как** Менеджер по закупкам, **я хочу, чтобы** система каждое утро автоматически проверяла склад "Юрловский" и создавала "Заказы на перемещение" для всех дефицитных позиций, **чтобы** мне не приходилось делать это вручную.
*   **Как** Менеджер по закупкам, **я хочу, чтобы** система при поиске товара сначала проверяла склад "Бестужевых", а потом "Контейнер", **чтобы** соблюдался установленный приоритет складов-доноров.
*   **Как** Менеджер по закупкам, **я хочу, чтобы** система не создавала заказ на товар, если он уже заказан, но еще не поступил, **чтобы** избежать затоваривания склада.

**Epic 2: Автоматизация Внешних Заказов (МойСклад) и Эксплуатация**
*   **Как** Менеджер по закупкам, **я хочу, чтобы** система автоматически создавала заявку на закупку у поставщика через МойСклад, если товара нет на наших внутренних складах, **чтобы** обеспечить непрерывность поставок.
*   **Как** Операционный директор, **я хочу** иметь панель управления, где я могу видеть лог всех операций системы и статус текущих заказов "в пути", **чтобы** контролировать процесс.
*   **Как** Менеджер по закупкам, **я хочу** иметь возможность запустить процесс пополнения вручную в любое время, **чтобы** оперативно реагировать на внеплановые потребности.
*   **Как** IT-специалист, **я хочу** получать мгновенные уведомления в Telegram о критических сбоях (например, недоступность API), **чтобы** быстро реагировать на инциденты.

### 6. Требования (Requirements)

#### Функциональные требования:
1.  Система должна автоматически запускаться каждый будний день в 9:00.
2.  Система должна анализировать остатки на складе "Юрловский" в 1С по методу min/max.
3.  Расчет потребности должен производиться по формуле: `max_stock - current_stock`.
4.  Система должна проверять наличие товара на складах-донорах в строгом порядке: 1) "Бестужевых", 2) "СВАО Контейнер".
5.  Система должна создавать документ "Заказ на перемещение" в 1С.
6.  Система должна создавать "Заказ покупателя" и инициировать создание "Заказа поставщику" в МойСклад.
7.  Система должна иметь внутреннюю базу данных для отслеживания статуса заказов "в пути".
8.  Система должна предоставлять веб-интерфейс (Панель Администратора) для просмотра логов и ручного запуска процессов.

#### Нефункциональные требования:
1.  **Надежность:** Система должна быть устойчива к временной недоступности API внешних систем.
2.  **Целостность данных:** Система не должна допускать создания дублирующих заказов.
3.  **Прозрачность:** Каждое действие системы должно быть залогировано.
4.  **Производительность:** Полный цикл проверки и создания заказов не должен занимать более 10 минут.

### 7. Критерии Успеха (Success Metrics)

*   Сокращение времени, затрачиваемого менеджерами на процесс пополнения, на 95% (с 2-3 часов до <10 минут).
*   Снижение количества случаев дефицита (out-of-stock) по ключевым позициям на 50% в течение 3 месяцев после внедрения.
*   Нулевое количество дублирующих заказов, созданных системой.

### 8. Что не входит в скоуп (Out of Scope)

*   Автоматическое обновление статуса "Заказа на перемещение" на "Выполнен" при фактическом поступлении товара (это будет реализовано в следующей итерации).
*   Сложная аналитика и построение отчетов по закупкам в Панели Администратора.
*   Интеграция с другими системами, кроме 1С УТ 11 и МойСклад.
